<!DOCTYPE html>
<html>
    <head>
        <title>Color Picker | Awsome_Creeper9</title>
        <link rel="icon" type="image/x-icon" href="/WebPageImages/favicon.png">
        <link rel="stylesheet" href="/styles/tools.css" />
        <meta content="Color Picker | Awsome_Creeper9" property="og:title" />
        <meta content="Input a color and get all other representations of the color." property="og:description" />
        <meta content="https://awsome-creeper9.github.io/tools/color-picker.html" property="og:url" />
        <!--        <meta content="https://embed.com/embedimage.png" property="og:image" /> No image as of now-->
        <meta content="#006464" name="theme-color" />
        <meta name="keywords" content="Awsome_Creeper9, tools, useful, utility, color, art, hex, rgb, hsl, hsb, hsv, cmyk, oklab, oklch, pick, picker" />
    </head>
    <style>
        label ~ input{
          display: block;
          margin-bottom: .5vh;
        }

        div {
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
            & input[type="color"] {
                width: 47vh;
                height: 4vh;
            }
        }

        input[type="text"], input[type="number"] {
          width: 45vh;
          margin-left: auto;
          margin-right:auto;
          padding: .5vh;
          border: 1px solid #333 !important;
          border-radius: .4vh;
          margin-bottom: 1vh;
          background: rgb(30, 30, 30);
        }

        .rgbSelect, .hsvSelect, .oklabSelect, .oklchSelect{
            width: 10vh ! important;
            display: inline;
            margin-top: 2.5vh;
        }
        .cmykSelect {
            width: 7.5vh ! important;
            display: inline;
            margin-top: 2.5vh;
        }
    </style>
    <body>
        <h1>Color Picker</h1>
        <div id="inputType">
            <label for="inputSelect">Input:</label>
            <select id="inputSelect">
                <option>COLOR</option>
                <option>HEX</option>
                <option>RGB</option>
                <option>HSV</option>
                <option>CMYK</option>
                <option>OKLab</option>
                <option>OKLCh</option>
            </select>
        </div>
        <div id="inputs">
            <div id="colorInput">
                <label for="colorSelect">COLOR:</label>
                <input type="color" id="colorSelect" />
            </div>
            <div id="hexInput">
                <label for="hexSelect">HEX:</label>
                <input type="text" id="hexSelect" />
            </div>
            <div id="rgbInput">
                <label for="rSelect">R:</label>
                <input type="number" id="rSelect" class="rgbSelect" min="0" max="255" />
                <label for="gSelect">G:</label>
                <input type="number" id="gSelect" class="rgbSelect" min="0" max="255" />
                <label for="bSelect">B:</label>
                <input type="number" id="bSelect" class="rgbSelect" min="0" max="255" />
            </div>
            <div id="hsvInput">
                <label for="hSelect">H:</label>
                <input type="number" id="hSelect" class="hsvSelect" min="0" max="360" />
                <label for="sSelect">S:</label>
                <input type="number" id="sSelect" class="hsvSelect" min="0" max="100" />
                <label for="vSelect">V:</label>
                <input type="number" id="vSelect" class="hsvSelect" min="0" max="100" />
            </div>
            <div id="cmykInput">
                <label for="cSelect">C:</label>
                <input type="number" id="cSelect" class="cmykSelect" min="0" max="100" />
                <label for="mSelect">M:</label>
                <input type="number" id="mSelect" class="cmykSelect" min="0" max="100" />
                <label for="ySelect">Y:</label>
                <input type="number" id="ySelect" class="cmykSelect" min="0" max="100" />
                <label for="kSelect">K:</label>
                <input type="number" id="kSelect" class="cmykSelect" min="0" max="100" />
            </div>
            <div id="oklabInput">
                <label for="LSelect">L:</label>
                <input type="number" id="LSelect" class="oklabSelect" min="0" max="1" />
                <label for="aSelect">a:</label>
                <input type="number" id="aSelect" class="oklabSelect" min="-.4" max=".4" />
                <label for="okbSelect">b:</label>
                <input type="number" id="okbSelect" class="oklabSelect" min="-.4" max=".4" />
            </div>
            <div id="oklchInput">
                <label for="LSelect2">L:</label>
                <input type="number" id="LSelect2" class="oklchSelect" min="0" max="1" />
                <label for="okCSelect">C:</label>
                <input type="number" id="okCSelect" class="oklchSelect" min="0" max=".4" />
                <label for="okhSelect">h:</label>
                <input type="number" id="okhSelect" class="oklchSelect" min="0" max="360" />
            </div>
        </div>
        <hr>
        <div id="outputs">
            <div id="colorOutput">
                <label for="color">COLOR:</label>
                <input autocomplete="off" type="color" id="color" />
            </div>
            <div id="hexOutput">
                <label for="hex">HEX:</label>
                <input autocomplete="off" type="text" id="hex" />
            </div>
            <div id="rgbOutput">
                <label for="rgb">RGB:</label>
                <input autocomplete="off" type="text" id="rgb" />
            </div>
            <div id="hsvOutput">
                <label for="hsv">HSV:</label>
                <input autocomplete="off" type="text" id="hsv" />
            </div>
            <div id="cmykOutput">
                <label for="cmyk">CMYK:</label>
                <input autocomplete="off" type="text" id="cmyk" />
            </div>
            <div id="oklabOutput">
                <label for="oklab">OKLab:</label>
                <input autocomplete="off" type="text" id="oklab" />
            </div>
            <div id="oklchOutput">
                <label for="oklch">OKLCh:</label>
                <input autocomplete="off" type="text" id="oklch" />
            </div>
        </div>
        <script>
            /////////////////////
            // Update Function //
            /////////////////////

            setInterval(() => {
                inputSelect();

                const selectedColor = inputColor(); //

                document.getElementById("color").value = selectedColor;
                document.getElementById("hex").value = selectedColor;
                document.getElementById("rgb").value = hexToRGB(selectedColor);
                document.getElementById("hsv").value = hexToHSV(selectedColor);
                document.getElementById("cmyk").value = hexToCMYK(selectedColor);
                document.getElementById("oklab").value = hexToOKLab(selectedColor);
                document.getElementById("oklch").value = hexToOKLCh(selectedColor);
            }, 50)

            //////////////////////////
            // Input Type Selection //
            //////////////////////////

            function inputSelect() {
                const selectedType = document.getElementById("inputSelect").value

                document.getElementById("colorInput").style.display = "unset"
                document.getElementById("hexInput").style.display = "unset"
                document.getElementById("rgbInput").style.display = "unset"
                document.getElementById("hsvInput").style.display = "unset"
                document.getElementById("cmykInput").style.display = "unset"
                document.getElementById("oklabInput").style.display = "unset"
                document.getElementById("oklchInput").style.display = "unset"

                document.getElementById("colorOutput").style.display = "none"
                document.getElementById("hexOutput").style.display = "none"
                document.getElementById("rgbOutput").style.display = "none"
                document.getElementById("hsvOutput").style.display = "none"
                document.getElementById("cmykOutput").style.display = "none"
                document.getElementById("oklabOutput").style.display = "none"
                document.getElementById("oklchOutput").style.display = "none"

                if (selectedType !== "COLOR") {
                    document.getElementById("colorInput").style.display = "none"
                    document.getElementById("colorOutput").style.display = "unset"
                }
                if (selectedType !== "HEX") {
                    document.getElementById("hexInput").style.display = "none"
                    document.getElementById("hexOutput").style.display = "unset"
                }
                if (selectedType !== "RGB") {
                    document.getElementById("rgbInput").style.display = "none"
                    document.getElementById("rgbOutput").style.display = "unset"
                }
                if (selectedType !== "HSV") {
                    document.getElementById("hsvInput").style.display = "none"
                    document.getElementById("hsvOutput").style.display = "unset"
                }
                if (selectedType !== "CMYK") {
                    document.getElementById("cmykInput").style.display = "none"
                    document.getElementById("cmykOutput").style.display = "unset"
                }
                if (selectedType !== "OKLab") {
                    document.getElementById("oklabInput").style.display = "none"
                    document.getElementById("oklabOutput").style.display = "unset"
                }
                if (selectedType !== "OKLCh") {
                    document.getElementById("oklchInput").style.display = "none"
                    document.getElementById("oklchOutput").style.display = "unset"
                }
            }

            //////////////////////
            // Input Color Type //
            //////////////////////

            function rgbToHex(num) {
                const hex = Math.round(num * 255).toString(16); // Converts r, g, or b value to hex
                return hex.length === 1 ? "0" + hex : hex; // Adds a 0 to the front of the hex value if it is less than 16
            };

            function inputColor() { // inputColor function
                const selectedType = document.getElementById("inputSelect").value
                if (selectedType === "COLOR") {
                    return document.getElementById("colorSelect").value
                }
                else if (selectedType === "HEX") {
                    return document.getElementById("hexSelect").value
                }
                else if (selectedType === "RGB") {
                    let R = document.getElementById("rSelect").value
                    let G = document.getElementById("gSelect").value
                    let B = document.getElementById("bSelect").value

                    R = Math.max(0, Math.min(255, R)) // makes sure R is in bounds
                    G = Math.max(0, Math.min(255, G)) // makes sure G is in bounds
                    B = Math.max(0, Math.min(255, B)) // makes sure B is in bounds

                    const hexR = rgbToHex(R / 255)
                    const hexG = rgbToHex(G / 255)
                    const hexB = rgbToHex(B / 255)

                    return "#" + hexR + hexG + hexB
                }
                else if (selectedType === "HSV") {
                    let h = parseInt(document.getElementById("hSelect").value)
                    let s = parseInt(document.getElementById("sSelect").value)
                    let v = parseInt(document.getElementById("vSelect").value)

                    h = (h % 360 + 360) % 360; // makes sure h is in bounds
                    s = Math.max(0, Math.min(100, s)); // makes sure s is in bounds
                    v = Math.max(0, Math.min(100, v)); // makes sure v is in bounds

                    s /= 100;
                    v /= 100;

                    const c = v * s;
                    const x = c * (1 - Math.abs(((h / 60) % 2) - 1));
                    const m = v - c;

                    let r, g, b;
                    if (h >= 0 && h < 60) {
                        r = c;
                        g = x;
                        b = 0;
                    } else if (h >= 60 && h < 120) {
                        r = x;
                        g = c;
                        b = 0;
                    } else if (h >= 120 && h < 180) {
                        r = 0;
                        g = c;
                        b = x;
                    } else if (h >= 180 && h < 240) {
                        r = 0;
                        g = x;
                        b = c;
                    } else if (h >= 240 && h < 300) {
                        r = x;
                        g = 0;
                        b = c;
                    } else {
                        r = c;
                        g = 0;
                        b = x;
                    }


                    const hexR = rgbToHex(r + m);
                    const hexG = rgbToHex(g + m);
                    const hexB = rgbToHex(b + m);

                    return "#" + hexR + hexG + hexB
                }
                else if (selectedType === "CMYK") {
                    let c = parseInt(document.getElementById("cSelect").value)
                    let m = parseInt(document.getElementById("mSelect").value)
                    let y = parseInt(document.getElementById("ySelect").value)
                    let k = parseInt(document.getElementById("kSelect").value)

                    c = Math.max(0, Math.min(100, c)); // makes sure c is in bounds
                    m = Math.max(0, Math.min(100, m)); // makes sure m is in bounds
                    y = Math.max(0, Math.min(100, y)); // makes sure y is in bounds
                    k = Math.max(0, Math.min(100, k)); // makes sure k is in bounds

                    c /= 100;
                    m /= 100;
                    y /= 100;
                    k /= 100;

                    const r = Math.round(255 * (1 - c) * (1 - k));
                    const g = Math.round(255 * (1 - m) * (1 - k));
                    const b = Math.round(255 * (1 - y) * (1 - k));


                    const hexR = rgbToHex(r); // Converts r value to hex
                    const hexG = rgbToHex(g); // Converts g value to hex
                    const hexB = rgbToHex(b); // Converts b value to hex

                    return "#" + hexR + hexG + hexB // Returns the hex value
                }
                else if (selectedType === "OKLab") {
                    let L = parseFloat(document.getElementById("LSelect").value)
                    let a = parseFloat(document.getElementById("aSelect").value)
                    let okb = parseFloat(document.getElementById("okbSelect").value)

                    L = Math.max(0, Math.min(1, L)); // makes sure l is in bounds
                    a = Math.max(-.4, Math.min(.4, a)); // makes sure a is in bounds
                    okb = Math.max(-.4, Math.min(.4, okb)); // makes sure b is in bounds

                    let lVal = L + 0.3963377774 * a + 0.2158037573 * okb; // Calculates l (not lightness)
                    let mVal = L - 0.1055613458 * a - 0.0638541728 * okb; // Calculates m
                    let sVal = L - 0.0894841775 * a - 1.2914855480 * okb; // Calculates s

                    lVal = lVal**3;
                    mVal = mVal**3;
                    sVal = sVal**3;

                    function gamma(x) {
                        return(x >= 0.0031308 ? 1.055 * Math.pow(x, 1 / 2.4) - 0.055 : 12.92 * x); // Used to convert from linear RGB to gamma RGB
                    }

                    let r = Math.round(255 * gamma(+4.0767416621 * lVal - 3.3077115913 * mVal + 0.2309699292 * sVal)); // Calculates r
                    let g = Math.round(255 * gamma(-1.2684380046 * lVal + 2.6097574011 * mVal - 0.3413193965 * sVal)); // Calculates g
                    let b = Math.round(255 * gamma(-0.0041960863 * lVal - 0.7034186147 * mVal + 1.7076147010 * sVal)); // Calculates b

                    r = Math.max(0, Math.min(255, r)); // sets r in bounds
                    g = Math.max(0, Math.min(255, g)); // sets g in bounds
                    b = Math.max(0, Math.min(255, b)); // sets b in bounds

                    const hexR = rgbToHex(r);
                    const hexG = rgbToHex(g);
                    const hexB = rgbToHex(b);

                    return "#" + hexR + hexG + hexB
                }
                else if (selectedType === "OKLCh") {
                    let L = parseFloat(document.getElementById("LSelect2").value)
                    let C = parseFloat(document.getElementById("okCSelect").value)
                    let h = parseFloat(document.getElementById("okhSelect").value)

                    L = Math.max(0, Math.min(1, L)); // makes sure l is in bounds
                    C = Math.max(0, Math.min(.4, C)); // makes sure c is in bounds
                    h = Math.max(0, Math.min(360, h)); // makes sure h is in bounds

                    let a = C * Math.cos(h / 180 * Math.PI);
                    let okb = C * Math.sin(h / 180 * Math.PI);

                    let lVal = L + 0.3963377774 * a + 0.2158037573 * okb;
                    let mVal = L - 0.1055613458 * a - 0.0638541728 * okb;
                    let sVal = L - 0.0894841775 * a - 1.2914855480 * okb;

                    lVal = lVal**3;
                    mVal = mVal**3;
                    sVal = sVal**3;

                    function gamma(x) {
                        return(x >= 0.0031308 ? 1.055 * Math.pow(x, 1 / 2.4) - 0.055 : 12.92 * x); // Used to convert from linear RGB to gamma RGB
                    }

                    let r = Math.round(255 * gamma(+4.0767416621 * lVal - 3.3077115913 * mVal + 0.2309699292 * sVal));
                    let g = Math.round(255 * gamma(-1.2684380046 * lVal + 2.6097574011 * mVal - 0.3413193965 * sVal));
                    let b = Math.round(255 * gamma(-0.0041960863 * lVal - 0.7034186147 * mVal + 1.7076147010 * sVal));

                    r = Math.max(0, Math.min(255, r));
                    g = Math.max(0, Math.min(255, g));
                    b = Math.max(0, Math.min(255, b));

                    const hexR = rgbToHex(r);
                    const hexG = rgbToHex(g);
                    const hexB = rgbToHex(b);

                    return "#" + hexR + hexG + hexB
                }
            }

            //////////////////////////
            // Conversion Functions //
            //////////////////////////

            function hexToRGB(hex) {
                hex = hex.replace('#', ''); // Removes the #
                const r = parseInt(hex.substring(0, 2), 16);
                const g = parseInt(hex.substring(2, 4), 16);
                const b = parseInt(hex.substring(4, 6), 16);
                return `rgb(${r}, ${g}, ${b})`;
            }

            function hexToHSV(hex) {
                hex = hex.replace('#', ''); // Removes the #

                const r = parseInt(hex.substring(0, 2), 16) / 255;
                const g = parseInt(hex.substring(2, 4), 16) / 255; //
                const b = parseInt(hex.substring(4, 6), 16) / 255; //

                const max = Math.max(r, g, b); // Finds the maximum value between r, g, and b
                const min = Math.min(r, g, b); // Finds the minimum value between r, g, and b

                const v = max; // Sets v equal to max

                let s = 0; // Sets s equal to 0
                if (max !== 0) {
                s = (max - min) / max;
                }

                let h = 0;
                if (max !== min) {
                    if (max === r) {
                        h = (g - b) / (max - min);
                    } else if (max === g) {
                        h = 2 + (b - r) / (max - min);
                    } else {
                        h = 4 + (r - g) / (max - min);
                    }
                    h *= 60;
                    if (h < 0) {
                        h += 360;
                    }
                }

                return `hsv(${Math.round(h)}, ${Math.round(s * 100)}%, ${Math.round(v * 100)}%)`;
            }

            function hexToCMYK(hex) {
                hex = hex.replace('#', ''); // Removes the #

                const r = parseInt(hex.substring(0, 2), 16) / 255;
                const g = parseInt(hex.substring(2, 4), 16) / 255;
                const b = parseInt(hex.substring(4, 6), 16) / 255;

                const K = 1 - Math.max(r, g, b); // Subtracts the maximum value between r, g, and b from 1 = K
                const C = (1 - r - K) / (1 - K); // Divides (1 - r - K) by (1 - K) = C
                const M = (1 - g - K) / (1 - K); // Divides (1 - g - K) by (1 - K) = M
                const Y = (1 - b - K) / (1 - K); // Divides (1 - b - K) by (1 - K) = Y

                if (K === 1) {
                    return `cmyk(0%, 0%, 0%, ${Math.round(K * 100)}%)`; // Returns the cmyk value (to prevent a divide by 0 error)
                }

                return `cmyk(${Math.round(C * 100)}%, ${Math.round(M * 100)}%, ${Math.round(Y * 100)}%, ${Math.round(K * 100)}%)`;
            }

            function hexToOKLab(hex) {
                function linear(x) {
                    return x >= 0.04045 ? Math.pow((x + 0.055) / 1.055, 2.4) : x / 12.92; // Used to convert from gamma RGB to linear RGB
                }

                hex = hex.replace('#', ''); // Removes the #
                const r = linear(parseInt(hex.substring(0, 2), 16) / 255);
                const g = linear(parseInt(hex.substring(2, 4), 16) / 255);
                const b = linear(parseInt(hex.substring(4, 6), 16) / 255);

                let lVal = 0.4122214708 * r + 0.5363325363 * g + 0.0514459929 * b;
                let mVal = 0.2119034982 * r + 0.6806995451 * g + 0.1073969566 * b;
                let sVal = 0.0883024619 * r + 0.2817188376 * g + 0.6299787005 * b;

                lVal = Math.cbrt(lVal);
                mVal = Math.cbrt(mVal);
                sVal = Math.cbrt(sVal);

                let L = lVal * 0.2104542553 + mVal * 0.7936177850 + sVal * -0.0040720468
                let a = lVal * 1.9779984951 + mVal * -2.4285922050 + sVal * 0.4505937099
                let okb = lVal * 0.0259040371 + mVal * 0.7827717662 + sVal * -0.8086757660

                L = Math.round(L * 10000) / 10000
                a = Math.round(a * 10000) / 10000
                okb = Math.round(okb * 10000) / 10000

                return `oklab(${L}, ${a}, ${okb})`;
            }

            function hexToOKLCh(hex) {
                let lab = hexToOKLab(hex);
                lab = lab.slice('oklab('.length, lab.length - 1);

                const L = parseFloat(lab);
                console.log(L);
                const a = parseFloat(lab.slice(`${L}`.length + 1, lab.length));
                console.log(a);
                const b = parseFloat(lab.slice(`${L}, ${a}`.length + 1, lab.length));
                console.log(b);

                let C = Math.sqrt(a * a + b * b);
                let h = Math.atan2(b, a) * 180 / Math.PI;
                if (h < 0) {
                    h += 360;
                }

                h = Math.round(h);
                C = Math.round(C * 10000) / 10000

                return `oklch(${L}, ${C}, ${h})`;
            }
        </script>
    </body>
</html>